---
layout: post
title: 
date: 2019-01-01 23:44:12
tags: [短视频,Project Ktr,ProjectUta,传颂之物,该写什么标签好呢……？]

---
SRPG开发之七-磨刀不误砍柴工

“视频似乎不能定义标题”

不不不，别误会，这不是要咕咕咕的意思，只是咱越来越意识到架构的重要性罢了，“扩展性好的架构能够事半功倍”，真的不只是说说而已

别的东西不谈，单论“抽象性”这一点，将不同模块内部的复杂处理等屏蔽掉，仅提供给外部一个简单的方法来查询处理结果，是比将查询方法做到每一个模块里面，要简单得多，也易懂得多的。虽然引擎本身提供的接口已经高度抽象过了，并没有太多OOP的空间，但OOP的思想，总归还是有着指导意义的

“只会提需求的策划不是好策划”，设计一个技能，并不是将天马行空的点子堆在两页纸上就行，而是要有实现方面的切实考量——不然每一个技能都单独做一套处理方法，可不就是一年前SRPG开发手记-总目及待办事项里说的，“总之就是一个苦力活，不断地堆啊堆啊堆”嘛！

关于这一方面，前人早已有了无数的实现，我只需要选一个不错的，照着造一个轮子就好，总比之前那样先拍脑瓜儿想，“姑且先干了”，然后连着重构好几遍才能勉强实现需求强。鉴于Ruby之类的要先读读语法，还是抄抄MV的技能系统和状态系统的处理吧，Javascript大略还是能瞎蒙着看懂逻辑的，把有几个回调点，需要几种特殊处理的思想拿过来，剩下的东西，就随便我自由发挥了，更何况本作设计上还有一个状态优先级，高优先级的状态会取消低优先级的状态并重置持续回合，当然玩家通过角色特性或符卡附加的状态肯定要单独计算的，不然中毒了，使用技能进入“100%暴击”状态，中毒就解了，天底下哪儿有这么好的事情！

所以，SRPG开发手记-总目及待办事项里的东西，我貌似都开了个框儿，然后卡在了设计上——毕竟“拍脑瓜儿”的苦头，我吃的可是太足了

话说回来，谈谈这次的重构，主要就是重写一些处理流程，进行解耦合和抽象化，个中辛苦自不必提，都是自己挖的坑，打碎了牙也得往肚子里咽，里面还有点历史遗留问题没有解决——也就是18年初刚刚有“抽象化”概念时首次尝试的部分——等时间充裕了，一口气重构掉，这样SRPG重构之后就和AVG那边一样，一丁点儿原来的东西都没有了，冥冥之中，这也是天意吧。不过，有了前几次重构的经验，这次要顺利得多，倒没有被某个问题卡住很久，也有最最基本的思路没变的缘故在里面吧

嗯，不知不觉就2019年了，这个坑也步入了第三个年头……好吧，不管看不看得见，这里总之先感谢前辈们过去一年里对我的教导，并厚着脸皮希望新的一年能够继续得到指导，要是咱能稍微有点长进那就更好了。如果说2016不谙世事，2017志骄意满，2018就是完全失败并不断逃避的一年，处于一种“希望别人关心但别人一关心反而害怕；希望别人承认但别人稍微承认（哪怕是安慰也好）就又反过头来自黑”的奇妙的叠加态，2019也没啥太好的想法，能够从今年的“20岁，是废物”，稍稍长进成“21岁，算是废物吧”，大约就能满足了

另外，本篇文章LOFTER在网页端无法编辑，没有超链接之类的，就请原谅我吧_(:з)∠)_

---
> ### 评论区：
>**defisym：** 佛了，居然还有时间限制，%@#%@%……&amp;……  *[2019-01-01 23:46:14]*
>
>