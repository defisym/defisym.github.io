---
layout: post
title: SRPG开发之六点九-新的开始
date: 2018-11-09 17:06:01
tags: [Project Ktr,ProjectUta,该写什么标签好呢……？]

---
看来这个系列真的是年更了  

虽然没有如此规划过，但每年春夏调整AVG系统，秋冬调整SRPG系统，其余时间进行剧本工作与其他研究，似乎已经成了一个不成文的惯例

真要说起来，这个坑里好多的设计都继承自2016年春的一个草案，除了一些世界观和细节的设定有沿袭，战斗系统的点子基本上是全盘继承

AVG系统最早始于2016年6月，在2016年7月有了第一个堪用的版本，断断续续修修补补到9月底，10月准备考试，11月传颂3发售各种P图水群（那时候虽然很傻但真的很开心），然后企划开始，接下来继续增加新功能，比如交叠淡化——看，这么重要和基础的东西，我这个时候才补上，更不要提退出按钮直到17年5月前后才加上……

![图片](./images/_LofteremhSNkVpRmJBei9sYmlvWDJxU0pjdDFMRVMzS1VFQzVvb2hISDhHVmdONEoyQ0JhalY4QmhRPT0.png?=imageView&thumbnail=500x0&quality=96&stripmeta=0&type=jpg%7Cwatermark&type=2)  

所以不要随随便便说不用改了啊，就像一百多年前，物理学的晴空上只剩下两朵乌云，经过物理学家们一百多年的努力，现在满天都是乌云

SRPG最早是参考了一个非常不完善的范例，这个范例没有移动动画，没有寻路，没有敌人AI……就连移动范围的计算，都是暴力的做了一圈儿几百个的隐藏判定点，角色移动力的上限=5，攻击范围上限=3……

![](http://imglf5.nosdn.127.net/img/emhSNkVpRmJBei9sYmlvWDJxU0pjaElheXFjN0RzRXVIelVEaXpIUzJtU2hxenU2aE1ETWl3PT0.png?=imageView&thumbnail=500x0&quality=96&stripmeta=0&type=jpg%7Cwatermark&type=2)  

当然，虽然很简陋，但它至少启发了我要如何去做这样一个游戏，17年初的冬天，就这样在调整地形判断与寻路中度过了

现在？只要你想，整个地图你都能走，啥地形都能给你算，也没那么智障的几百个隐藏判定点跟随

![](http://imglf3.nosdn.127.net/img/emhSNkVpRmJBei9sYmlvWDJxU0pjbEd5Q0pRWWdJcnBxTTRZZk9KY3JxTlFjMlcyVlpWL3BBPT0.png?=imageView&thumbnail=500x0&quality=96&stripmeta=0&type=jpg%7Cwatermark&type=2)  

等到17年的4月份，AVG部分也补齐了分支，修掉了很多演出的bug，同时因为背了一个锅（详情请见：[黑历史](http://www.lofter.com/collection/defisym/?op=collectionDetail&collectionId=137106)），整个系统也有了较大的变动，补齐了鉴赏、日程等等一系列的东西。虽然以现在的眼光来看很垃圾就是了……

17年10月，战旗系统第一次重构，在之前那个连原型都不算的东西上更进一步，完成了敌人AI和一些设计上的想法——前段时间重新读了这一块的代码，依然是很垃圾，看完了只有一个念头：**这破玩意当时是怎么跑起来的？**

一晃儿就到了18年4月，因为UI相关的工作，接触到了前辈，也感受到了自己的不足，努力地离开了原本的舒适区，开始了对AVG的重构——或者说，重写，相关工作一直到10月中旬，总算是略微像点样了

我从18年年初开始读了一些书，也意识到了剧本上的一些问题，虽然努力的去改正了，但似乎并没有什么太大的进展……这就不是几个月的事件能一蹴而就的，需要更多的阅读与积累，所以不管是被前辈摩擦还是被后辈摩擦都要虚心受着，反正剧本要一直改写，改到自己吐为止，然后擦擦嘴，吐完了继续改，不过瓶颈是真的瓶颈……

那么让我们来改代码吧！  

——“这么垃圾的玩意谁写的？”

——“哦，是我”

首先是花了一个礼拜把之前的代码读完了，详细设计也补上了，所以以后光写手记是绝对绝对不够的，谁要告诉你不写文档你就可以抽他了

就像改剧本的时候一直想扇自己嘴巴子，读代码的时候我也想扇自己嘴巴子……

大体的逻辑是没问题的，就是有点乱，重新梳理一下状态，然后把该解耦的解耦就行了，虽然直观上不会有太大的提升，但至少我以后改起来或者做一些战斗演出会方便不少。所以这次还是先别急着动手了，多读读酝酿酝酿再来，别犯之前两个方法内容一模一样就名字不一样的错误了……

除了画面上增加细节外，还会修订架构，把一些原架构很难实现的坑填上。系统本身还会补充上缺失的状态模块，在数据库制作的同时，也可以考虑重启18年3月放下的物品栏。这些基础的东西年前有希望做完，在年后会开始做一年多以前策划好的其他系统，比如卡牌，比如场地互动

然后终于能有一个完整的，可以见人的战旗系统了

啊，对了，AVG框架搭完了，还要画立绘画CG，这些都画完了还要调演出

战旗做完了还得画地图，画人物动作……

来吧，十一个可控角色十一套动画，十一个特殊技能分两套画，移动攻击受伤闪避反击弹反倒地死亡，还没算特殊技能的Cut in演出。哦，对了，还有敌人的动画

嗯！所以说十年是不够用的，二十年可能刚刚好

马上企划就要进入第三年了，时间过得真快，感觉用不了多久，我就能说出那句经典的台词了：

**“三年后又三年，三年之后又三年，快十年了，老大！”**

新的一年，新的开始，新的进步，新的失落，新的目标，新的咕咕咕

---
> ### 评论区：
>**defisym：** 考古还行_(:з)∠)_  *[2018-11-27 14:15:08]*
>
>**反反反反：** 史前留名以供三年后来考古，嘿嘿_(:D)∠)_  *[2018-11-10 02:45:05]*
>
>